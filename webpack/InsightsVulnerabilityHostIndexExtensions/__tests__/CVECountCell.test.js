import React from 'react';
import { render, screen } from '@testing-library/react';
import { API } from 'foremanReact/redux/API';
import { CVECountCell } from '../CVECountCell';

jest.mock('foremanReact/redux/API');
API.get.mockImplementation(async () => ({
  data: [
    {
      attributes: {
        cve_count: 1,
      },
    },
  ],
}));

describe('CVECountCell', () => {
  it('renders an empty cves count column', () => {
    const hostDetailsMock = {
      name: 'test-host.example.com',
      subscription_facet_attributes: {
        uuid: null, // no subscription
      },
    };
    render(<CVECountCell hostDetails={hostDetailsMock} />);
    expect(screen.getByRole('img', { hidden: true })).toBeTruthy();
  });
});
